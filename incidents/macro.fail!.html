<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `fail!` macro in crate `incidents`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, fail!">

    <title>incidents::fail! - Rust</title>

    <link rel="stylesheet" type="text/css" href="../main.css">

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <section class="sidebar">
        
        <p class='location'><a href='index.html'>incidents</a></p><div class='block struct'><h2>Structs</h2><a class='struct ' href='struct.Failure.html'>Failure</a><a class='struct ' href='struct.LocationInfo.html'>LocationInfo</a><a class='struct ' href='struct.TraceFormatter.html'>TraceFormatter</a><a class='struct ' href='struct.Traceback.html'>Traceback</a></div><div class='block trait'><h2>Traits</h2><a class='trait ' href='trait.ConstructFailure.html'>ConstructFailure</a><a class='trait ' href='trait.Error.html'>Error</a><a class='trait ' href='trait.ErrorExt.html'>ErrorExt</a><a class='trait ' href='trait.Frame.html'>Frame</a><a class='trait ' href='trait.FromError.html'>FromError</a></div><div class='block fn'><h2>Functions</h2><a class='fn ' href='fn.print_traceback.html'>print_traceback</a></div><div class='block macro'><h2>Macros</h2><a class='macro current' href='macro.fail!.html'>fail!</a><a class='macro ' href='macro.try!.html'>try!</a></div>
    </section>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press 'S' to search, '?' for more options..."
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content macro">
<h1 class='fqn'><span class='in-band'><a href='index.html'>incidents</a>::<wbr><a class='macro' href=''>fail!</a><wbr></span><span class='out-of-band'><span id='render-detail'>
            <a id="collapse-all" href="#">[-]
            </a>&nbsp;<a id="expand-all" href="#">[+]</a>
        </span><a id='src-4294967295' href='../src/incidents/src/lib.rs.html#711-727'>[src]</a></span></h1>
<pre class='rust macro'>
<span class='macro'>macro_rules</span><span class='macro'>!</span> <span class='ident'>fail</span> {
    ($(<span class='macro-nonterminal'>$</span><span class='macro-nonterminal'>expr</span>:<span class='ident'>expr</span>),<span class='op'>*</span>) <span class='op'>=&gt;</span> ({
        <span class='attribute'>#[<span class='ident'>cold</span>]</span>
        <span class='attribute'>#[<span class='ident'>inline</span>(<span class='ident'>never</span>)]</span>
        <span class='kw'>fn</span> <span class='ident'>fail</span><span class='op'>&lt;</span><span class='ident'>A</span>, <span class='ident'>X</span>, <span class='ident'>T</span>: ::<span class='ident'>incidents</span>::<span class='ident'>ConstructFailure</span><span class='op'>&lt;</span><span class='ident'>A</span><span class='op'>&gt;&gt;</span>(<span class='ident'>args</span>: <span class='ident'>A</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>X</span>, <span class='ident'>T</span><span class='op'>&gt;</span> {
            <span class='prelude-val'>Err</span>(::<span class='ident'>incidents</span>::<span class='ident'>ConstructFailure</span>::<span class='ident'>construct_failure</span>(
                <span class='ident'>args</span>,
                <span class='kw'>if</span> <span class='macro'>cfg</span><span class='macro'>!</span>(<span class='ident'>ndebug</span>) {
                    <span class='prelude-val'>None</span>
                } <span class='kw'>else</span> {
                    <span class='prelude-val'>Some</span>(::<span class='ident'>incidents</span>::<span class='ident'>LocationInfo</span>::<span class='ident'>new</span>(<span class='macro'>file</span><span class='macro'>!</span>(), <span class='macro'>line</span><span class='macro'>!</span>()))
                }
            ))
        }
        <span class='kw'>return</span> <span class='ident'>fail</span>(($(<span class='macro-nonterminal'>$</span><span class='macro-nonterminal'>expr</span>,)<span class='op'>*</span>));
    });
}
</pre>
<div class='docblock'><p>Fails with an error.</p>

<p>This works by taking some arguments and causing an early return with
an error value.  The conversion of the error value is performed to the
signature of the return value of the function.  This allows this to be
used in functions that return <code>Result&lt;T, E: Error&gt;</code> as well as
functions that return <code>Result&lt;T, Failure&lt;E: Error&gt;&gt;</code>.</p>

<p><code>fail!(error)</code> -&gt; Result<T, Failure<Error>&gt;
    Fails with an error and wraps it in a failure.</p>

<p>`fail!(error) -&gt; Result<T, Error>
    Fails with an error and returns it unwrapped.  This should only be
    used if the error is small and if debugging is not needed.  This can
    be useful in certain specialized situations.</p>

<p><code>fail!(failure)</code>
    Just fails with an already existing failure and passes it onwards.</p>

<p><code>fail!(error, causing_failure)</code>
    Fails with an error and a causing failure.  In debug builds this
    will allow the errors to be chained even if an error gets &quot;lost&quot;.</p>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <div id="help" class="hidden">
        <div class="shortcuts">
            <h1>Keyboard shortcuts</h1>
            <dl>
                <dt>?</dt>
                <dd>Show this help dialog</dd>
                <dt>S</dt>
                <dd>Focus the search field</dd>
                <dt>&larrb;</dt>
                <dd>Move up in search results</dd>
                <dt>&rarrb;</dt>
                <dd>Move down in search results</dd>
                <dt>&#9166;</dt>
                <dd>Go to active search result</dd>
            </dl>
        </div>
        <div class="infos">
            <h1>Search tricks</h1>
            <p>
                Prefix searches with a type followed by a colon (e.g.
                <code>fn:</code>) to restrict the search to a given type.
            </p>
            <p>
                Accepted types are: <code>fn</code>, <code>mod</code>,
                <code>struct</code>, <code>enum</code>,
                <code>trait</code>, <code>typedef</code> (or
                <code>tdef</code>).
            </p>
        </div>
    </div>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "incidents";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script async src="../search-index.js"></script>
</body>
</html>